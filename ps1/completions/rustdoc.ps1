Register-ArgumentCompleter -Native -CommandName rustdoc -ScriptBlock {
  param([string]$wordToComplete)
  if ($wordToComplete.StartsWith('-')) {
    @('-h', '--help', '-V', '--version', '-v', '--verbose', '-w', '--output-format', '--output', '-o', '--out-dir', '--crate-name', '--crate-type', '-L', '--library-path', '--cfg', '--check-cfg', '--extern', '--extern-html-root-url', '--extern-html-root-takes-precedence', '-C', '--codegen', '--document-private-items', '--document-hidden-items', '--test', '--test-args', '--test-run-directory', '--target', '--markdown-css', '--html-in-header', '--html-before-content', '--html-after-content', '--markdown-before-content', '--markdown-after-content', '--markdown-playground-url', '--markdown-no-toc', '-e', '--extend-css', '--sysroot', '--playground-url', '--markdown-playground-url', '--display-doctest-warnings', '--crate-version', '--sort-modules-by-appearance', '--default-theme', '--default-setting', '--theme', '--check-theme', '--resource-suffix', '--edition', '--color', '--error-format', '--diagnostic-width', '--json', '-A', '--allow', '-W', '--warn', '--force-warn', '-D', '--deny', '-F', '--forbid', '--cap-lints', '--index-page', '--enable-index-page', '--static-root-path', '--persist-doctests', '--show-coverage', '--enable-per-target-ignores', '--runtool', '--runtool-arg', '--test-builder', '--test-builder-wrapper', '--check', '--generate-redirect-map', '--emit', '--no-run', '--show-type-layout', '--nocapture', '--generate-link-to-definition', '--scrape-examples-output-path', '--scrape-examples-target-crate', '--scrape-tests', '--with-examples', '--disable-minification', '--plugin-path', '--passes', '--plugins', '--no-defaults', '-r', '--input-format', '--html-no-source') | Where-Object { $_ -like "$wordToComplete*" }
  }
}
